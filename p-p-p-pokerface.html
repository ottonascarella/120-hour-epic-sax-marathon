<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>P-P-P-Pokerface</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="css/base.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src="js/exercise-list.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <ul class="nav navbar-nav">
      <li>
        <a href="index.html">← index</a>
      </li>
      <li>
        <button type="button"
                class="btn btn-default navbar-btn"
                data-toggle="collapse" data-target="#exercise-list">
          Exercises
        </button>
      </li>
      <li>
        <ul id="exercise-list" class="collapse navbar-text list-inline">
        </ul>
      </li>
  </div>
</nav>
<div class="container">
  <div class="main-content">
<header id="title-block-header">
<h1 class="title">P-P-P-Pokerface</h1>
</header>
<section id="fork-this" class="level2">
<h2>Fork this</h2>
<p><a
href="https://github.com/iloveponies/p-p-p-pokerface">https://github.com/iloveponies/p-p-p-pokerface</a></p>
<p><a
href="basic-tools.html#how-to-submit-answers-to-exercises">Here</a> are
the instructions if you need them. Be sure to fork the repository behind
the link above.</p>
</section>
<section id="data-representation" class="level2">
<h2>Data representation</h2>
<p>A traditional playing card has a rank and a suit. The rank is a
number from 2 to 10, J, Q, K or A and the suit is Clubs, Diamonds,
Hearts or Spades.</p>
<p>We want a simple way to represent poker hands and cards. A card is
simply going to be a string of the form <code>"5C"</code> where the
first character represents the rank and the second character represents
the suit. To keep the representation at 2 characters, we’ll use the
following coding for values between 10 and 14:</p>
<table>
<thead>
<tr class="header">
<th>Rank</th>
<th>Character</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>10</td>
<td>T</td>
</tr>
<tr class="even">
<td>11</td>
<td>J</td>
</tr>
<tr class="odd">
<td>12</td>
<td>Q</td>
</tr>
<tr class="even">
<td>13</td>
<td>K</td>
</tr>
<tr class="odd">
<td>14</td>
<td>A</td>
</tr>
</tbody>
</table>
<p>So, for example, the Queen of Hearts is <code>"QH"</code> and the Ace
of Spades is <code>"AS"</code>.</p>
</section>
<section id="rank-and-suit" class="level2">
<h2>Rank and suit</h2>
<p>We’ll want a couple of helper functions to read the rank and suit of
a card.</p>
<p>A useful thing to note is that Strings are sequencable, so you can
use sequence destructuring on them:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [[fst snd] <span class="st">&quot;5H&quot;</span>]</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  [fst snd]) <span class="co">;=&gt; [\5 \H]</span></span></code></pre></div>
<p>If you are only interested in some destructured values, it is
idiomatic to use the name <code>_</code> for ignored values:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [[_ snd] <span class="st">&quot;AH&quot;</span>]</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  snd) <span class="co">;=&gt; \H</span></span></code></pre></div>
<p>And finally, remember that you can use <code>(str value)</code> to
turn anything into its string representation, including characters.</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">str</span> <span class="ch">\C</span>) <span class="co">;=&gt; &quot;C&quot;</span></span></code></pre></div>
<p>You should now be able to write the <code>(suit card)</code> function
that returns the suit of a card.</p>
<section class="alert alert-success">
<h3>
Exercise 1
</h3>
<p>Write the function <code>(suit card)</code> which takes a singe card
and returns the suit of the card as a one character string.</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>(suit <span class="st">&quot;2H&quot;</span>) <span class="co">;=&gt; &quot;H&quot;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>(suit <span class="st">&quot;2D&quot;</span>) <span class="co">;=&gt; &quot;D&quot;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>(suit <span class="st">&quot;2C&quot;</span>) <span class="co">;=&gt; &quot;C&quot;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>(suit <span class="st">&quot;3S&quot;</span>) <span class="co">;=&gt; &quot;S&quot;</span></span></code></pre></div>
</section>
<p>To get the rank, you’ll need to convert a character into an integer.
To see if a character is a digit, like <code>\5</code> or
<code>\2</code>, you can use <code>(Character/isDigit char)</code>:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>(Character/isDigit <span class="ch">\5</span>) <span class="co">;=&gt; true</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>(Character/isDigit <span class="ch">\A</span>) <span class="co">;=&gt; false</span></span></code></pre></div>
<p>If a character is a digit, you can use
<code>(Integer/valueOf string)</code> to convert it to an integer. You
will first have to convert the character into a string.</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>(Integer/valueOf <span class="st">&quot;12&quot;</span>)     <span class="co">;=&gt; 12</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>(Integer/valueOf (<span class="kw">str</span> <span class="ch">\5</span>)) <span class="co">;=&gt; 5</span></span></code></pre></div>
<p>Finally, to turn the characters <code>T</code>, <code>J</code>,
<code>Q</code>, <code>K</code> and <code>A</code> into integers, using a
map to store the values is very useful:</p>
<div class="sourceCode" id="cb7"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">get</span> {<span class="ch">\A</span> <span class="dv">100</span>, <span class="ch">\B</span> <span class="dv">20</span>} <span class="ch">\B</span>) <span class="co">;=&gt; 20</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>({<span class="ch">\A</span> <span class="dv">100</span>, <span class="ch">\B</span> <span class="dv">20</span>} <span class="ch">\B</span>) <span class="co">;=&gt; 20</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> replacements </span>{<span class="ch">\A</span> <span class="dv">100</span>, <span class="ch">\B</span> <span class="dv">20</span>})</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>(replacements <span class="ch">\B</span>) <span class="co">;=&gt; 20</span></span></code></pre></div>
<p>You can now write the <code>(rank card)</code> function.</p>
<section class="alert alert-success">
<h3>
Exercise 2
</h3>
<p>Write the function <code>(rank card)</code> which takes a single card
and returns the rank as a number between 2 and 14.</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>(rank <span class="st">&quot;2H&quot;</span>) <span class="co">;=&gt; 2</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>(rank <span class="st">&quot;4S&quot;</span>) <span class="co">;=&gt; 4</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>(rank <span class="st">&quot;TS&quot;</span>) <span class="co">;=&gt; 10</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>(rank <span class="st">&quot;JS&quot;</span>) <span class="co">;=&gt; 11</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>(rank <span class="st">&quot;QS&quot;</span>) <span class="co">;=&gt; 12</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>(rank <span class="st">&quot;KS&quot;</span>) <span class="co">;=&gt; 13</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>(rank <span class="st">&quot;AS&quot;</span>) <span class="co">;=&gt; 14</span></span></code></pre></div>
</section>
</section>
<section id="some-additional-functions" class="level2">
<h2>Some additional functions</h2>
<p>Here’s a couple of functions that should prove useful.</p>
<p><code>(frequencies sequence)</code> is used to see how many times an
element appears in a sequence. It returns a map where elements are
mapped to their appearance counts:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">frequencies</span> [<span class="dv">4</span> <span class="dv">7</span> <span class="dv">7</span> <span class="dv">4</span> <span class="dv">7</span>]) <span class="co">;=&gt; {4 2, 7 3}</span></span></code></pre></div>
<p>In this case, we had three sevens and two fours.</p>
<p>If you are only interested in the keys or values of a map, you can
get them with <code>(keys a-map)</code> and
<code>(vals a-map)</code>:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">vals</span> (<span class="kw">frequencies</span> [<span class="dv">4</span> <span class="dv">7</span> <span class="dv">7</span> <span class="dv">4</span> <span class="dv">7</span>]))</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="co">;=&gt; (2 3)</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co">;   ^-- now that looks a lot like a full house</span></span></code></pre></div>
<p><code>(max num1 num2 num3 ...)</code> returns its largest parameter
and <code>(min num1 num2 num3 ...)</code> returns its smallest
paremeter.</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">max</span> <span class="dv">1</span> <span class="dv">5</span> <span class="dv">4</span> <span class="dv">2</span>) <span class="co">;=&gt; 5</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>(<span class="kw">min</span> <span class="dv">1</span> <span class="dv">5</span> <span class="dv">4</span> <span class="dv">2</span>) <span class="co">;=&gt; 1</span></span></code></pre></div>
<p>But what should you do if you have a sequence of numbers, like the
vector <code>[1 -4 2 3 5]</code>, and you want its smallest or largest
value? There is a very useful special form called <code>apply</code> for
this: <code>(apply function parameter-sequence)</code> calls
<code>function</code> with the parameters from
<code>parameter-sequence</code>.</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">apply</span> <span class="kw">str</span> [<span class="st">&quot;Over &quot;</span> <span class="dv">9000</span> <span class="st">&quot;!&quot;</span>])</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">;=&gt; (str &quot;Over &quot; 9000 &quot;!&quot;)</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co">;=&gt; &quot;Over 9000!&quot;</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">apply</span> <span class="kw">max</span> [<span class="dv">5</span> <span class="dv">3</span> <span class="dv">2</span>])</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">;=&gt; (max 5 3 2)</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">;=&gt; 5</span></span></code></pre></div>
<p>That’s quite a lot to remember, but these should provide useful when
detecting different hands. If you get stuck, the functions introduced
above might help.</p>
</section>
<section id="hands" class="level2">
<h2>Hands</h2>
<p>If you don’t remember a hand, the <a
href="http://en.wikipedia.org/wiki/Poker_hands">Poker hands article</a>
at Wikipedia has them listed and explained.</p>
<p>Our representation for a poker hand is simply a vector of cards:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> high-seven </span>[<span class="st">&quot;2H&quot;</span> <span class="st">&quot;3S&quot;</span> <span class="st">&quot;4C&quot;</span> <span class="st">&quot;5C&quot;</span> <span class="st">&quot;7D&quot;</span>])</span></code></pre></div>
<p>Here’s a bunch of hands to use for testing:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> high-seven                   </span>[<span class="st">&quot;2H&quot;</span> <span class="st">&quot;3S&quot;</span> <span class="st">&quot;4C&quot;</span> <span class="st">&quot;5C&quot;</span> <span class="st">&quot;7D&quot;</span>])</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> pair-hand                    </span>[<span class="st">&quot;2H&quot;</span> <span class="st">&quot;2S&quot;</span> <span class="st">&quot;4C&quot;</span> <span class="st">&quot;5C&quot;</span> <span class="st">&quot;7D&quot;</span>])</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> two-pairs-hand               </span>[<span class="st">&quot;2H&quot;</span> <span class="st">&quot;2S&quot;</span> <span class="st">&quot;4C&quot;</span> <span class="st">&quot;4D&quot;</span> <span class="st">&quot;7D&quot;</span>])</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> three-of-a-kind-hand         </span>[<span class="st">&quot;2H&quot;</span> <span class="st">&quot;2S&quot;</span> <span class="st">&quot;2C&quot;</span> <span class="st">&quot;4D&quot;</span> <span class="st">&quot;7D&quot;</span>])</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> four-of-a-kind-hand          </span>[<span class="st">&quot;2H&quot;</span> <span class="st">&quot;2S&quot;</span> <span class="st">&quot;2C&quot;</span> <span class="st">&quot;2D&quot;</span> <span class="st">&quot;7D&quot;</span>])</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> straight-hand                </span>[<span class="st">&quot;2H&quot;</span> <span class="st">&quot;3S&quot;</span> <span class="st">&quot;6C&quot;</span> <span class="st">&quot;5D&quot;</span> <span class="st">&quot;4D&quot;</span>])</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> low-ace-straight-hand        </span>[<span class="st">&quot;2H&quot;</span> <span class="st">&quot;3S&quot;</span> <span class="st">&quot;4C&quot;</span> <span class="st">&quot;5D&quot;</span> <span class="st">&quot;AD&quot;</span>])</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> high-ace-straight-hand       </span>[<span class="st">&quot;TH&quot;</span> <span class="st">&quot;AS&quot;</span> <span class="st">&quot;QC&quot;</span> <span class="st">&quot;KD&quot;</span> <span class="st">&quot;JD&quot;</span>])</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> flush-hand                   </span>[<span class="st">&quot;2H&quot;</span> <span class="st">&quot;4H&quot;</span> <span class="st">&quot;5H&quot;</span> <span class="st">&quot;9H&quot;</span> <span class="st">&quot;7H&quot;</span>])</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> full-house-hand              </span>[<span class="st">&quot;2H&quot;</span> <span class="st">&quot;5D&quot;</span> <span class="st">&quot;2D&quot;</span> <span class="st">&quot;2C&quot;</span> <span class="st">&quot;5S&quot;</span>])</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> straight-flush-hand          </span>[<span class="st">&quot;2H&quot;</span> <span class="st">&quot;3H&quot;</span> <span class="st">&quot;6H&quot;</span> <span class="st">&quot;5H&quot;</span> <span class="st">&quot;4H&quot;</span>])</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> low-ace-straight-flush-hand  </span>[<span class="st">&quot;2D&quot;</span> <span class="st">&quot;3D&quot;</span> <span class="st">&quot;4D&quot;</span> <span class="st">&quot;5D&quot;</span> <span class="st">&quot;AD&quot;</span>])</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> high-ace-straight-flush-hand </span>[<span class="st">&quot;TS&quot;</span> <span class="st">&quot;AS&quot;</span> <span class="st">&quot;QS&quot;</span> <span class="st">&quot;KS&quot;</span> <span class="st">&quot;JS&quot;</span>])</span></code></pre></div>
<section class="alert alert-success">
<h3>
Exercise 3
</h3>
<p>Write the function <code>(pair? hand)</code> that returns
<code>true</code> if there is a pair in <code>hand</code> and
<code>false</code> if there is no pair in <code>hand</code>.</p>
<pre><code>(pair? pair-hand)  ;=&gt; true
(pair? high-seven) ;=&gt; false</code></pre>
</section>
<section class="alert alert-success">
<h3>
Exercise 4
</h3>
<p>Write the function <code>(three-of-a-kind? hand)</code> that returns
<code>true</code> if the hand contains a three of a kind.</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>(three-of-a-kind? two-pairs-hand)       <span class="co">;=&gt; false</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>(three-of-a-kind? three-of-a-kind-hand) <span class="co">;=&gt; true</span></span></code></pre></div>
</section>
<section class="alert alert-success">
<h3>
Exercise 5
</h3>
<p>Write the function <code>(four-of-a-kind? hand)</code> that returns
<code>true</code> if the hand contains a four of a kind.</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>(four-of-a-kind? two-pairs-hand)      <span class="co">;=&gt; false</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>(four-of-a-kind? four-of-a-kind-hand) <span class="co">;=&gt; true</span></span></code></pre></div>
</section>
<section class="alert alert-success">
<h3>
Exercise 6
</h3>
<p>Write the function <code>(flush? hand)</code> that returns
<code>true</code> if the hand is a flush.</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>(flush? pair-hand)  <span class="co">;=&gt; false</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>(flush? flush-hand) <span class="co">;=&gt; true)</span></span></code></pre></div>
</section>
<p><code>(sort a-seq)</code> returns a sequence with the elements of
<code>a-seq</code> in a sorted order.</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">sort</span> [<span class="dv">5</span> -<span class="dv">1</span> <span class="dv">3</span> <span class="dv">17</span> -<span class="dv">10</span>]) <span class="co">;=&gt; (-10 -1 3 5 17)</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>(<span class="kw">sort</span> [<span class="dv">6</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">7</span> <span class="dv">3</span>])     <span class="co">;=&gt; (3 4 5 6 7)</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">;                               ^</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">;                               |</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">;kind of looks like a straight---</span></span></code></pre></div>
<p><code>(range lower-bound upper-bound)</code> takes two integers and
returns a sequence with all integers from <code>lower-bound</code> to
<code>upper-bound</code>, but does not include
<code>upper-bound</code>.</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">range</span> <span class="dv">1</span> <span class="dv">5</span>) <span class="co">;=&gt; (1 2 3 4)</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>(<span class="kw">range</span> <span class="dv">5</span>)   <span class="co">;=&gt; (0 1 2 3 4)</span></span></code></pre></div>
<p>You can test for equality between sequences with <code>=</code>.</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">=</span> [<span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">7</span>] (<span class="kw">range</span> <span class="dv">3</span> (<span class="kw">+</span> <span class="dv">3</span> <span class="dv">5</span>)))</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co">;=&gt; (=  [3       4       5       6       7]</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co">;       (3       4       5       6       7))</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co">;=&gt; (and (= 3 3) (= 4 4) (= 5 5) (= 6 6) (= 7 7))</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="co">;=&gt; true</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>(<span class="kw">=</span> [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span>] (<span class="kw">seq</span> [<span class="dv">1</span> <span class="dv">2</span>])) <span class="co">;=&gt; false</span></span></code></pre></div>
<p>Two sequences are equal if their elements are equal and in the same
order.</p>
<section class="alert alert-success">
<h3>
Exercise 7
</h3>
<p>Write the function <code>(full-house? hand)</code> that returns
<code>true</code> if <code>hand</code> is a full house, and otherwise
<code>false</code>.</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>(full-house? three-of-a-kind-hand) <span class="co">;=&gt; false</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>(full-house? full-house-hand)      <span class="co">;=&gt; true</span></span></code></pre></div>
</section>
<section class="alert alert-success">
<h3>
Exercise 8
</h3>
<p>Write the function <code>(two-pairs? hand)</code> that return
<code>true</code> if <code>hand</code> has two pairs, and otherwise
<code>false</code>.</p>
<p>Note that a four of a kind is also two pairs.</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>(two-pairs? two-pairs-hand)      <span class="co">;=&gt; true</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>(two-pairs? pair-hand)           <span class="co">;=&gt; false</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>(two-pairs? four-of-a-kind-hand) <span class="co">;=&gt; true</span></span></code></pre></div>
</section>
<p>In a straight, an ace is accepted as either 1 or 14, so both of the
following hands have a straight:</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>[<span class="st">&quot;2H&quot;</span> <span class="st">&quot;3S&quot;</span> <span class="st">&quot;4C&quot;</span> <span class="st">&quot;5D&quot;</span> <span class="st">&quot;AD&quot;</span>]</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>[<span class="st">&quot;TH&quot;</span> <span class="st">&quot;AS&quot;</span> <span class="st">&quot;QC&quot;</span> <span class="st">&quot;KD&quot;</span> <span class="st">&quot;JD&quot;</span>]</span></code></pre></div>
<p>A useful function here is <code>(replace replace-map a-seq)</code>.
It takes a map of replacements and a sequence and replaces the keys of
<code>replace-map</code> in <code>a-seq</code> with their associated
values.</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">replace</span> {<span class="dv">1</span> <span class="st">&quot;a&quot;</span>, <span class="dv">2</span> <span class="st">&quot;b&quot;</span>} [<span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span>]) <span class="co">;=&gt; [&quot;a&quot; &quot;b&quot; 3 4]</span></span></code></pre></div>
<p>Finally we can implement <code>straight?</code>.</p>
<section class="alert alert-success">
<h3>
Exercise 9
</h3>
<p>Write the function <code>(straight? hand)</code> that returns
<code>true</code> if <code>hand</code> is a straight, and otherwise
<code>false</code>.</p>
<p>Note that an ace is accepted both as a rank 1 and rank 14 card in
straights.</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>(straight? two-pairs-hand)             <span class="co">;=&gt; false</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>(straight? straight-hand)              <span class="co">;=&gt; true</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>(straight? low-ace-straight-hand)      <span class="co">;=&gt; true</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>(straight? [<span class="st">&quot;2H&quot;</span> <span class="st">&quot;2D&quot;</span> <span class="st">&quot;3H&quot;</span> <span class="st">&quot;4H&quot;</span> <span class="st">&quot;5H&quot;</span>]) <span class="co">;=&gt; false</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>(straight? high-ace-straight-hand)     <span class="co">;=&gt; true</span></span></code></pre></div>
</section>
<p>And finally, there’s straight flush. This shouldn’t be very difficult
after having already defined flush and straight.</p>
<section class="alert alert-success">
<h3>
Exercise 10
</h3>
<p>Write the function <code>(straight-flush? hand)</code> which returns
<code>true</code> if the hand is a straight flush, that is both a
straight and a flush, and otherwise <code>false</code>.</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>(straight-flush? straight-hand)                <span class="co">;=&gt; false</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>(straight-flush? flush-hand)                   <span class="co">;=&gt; false</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>(straight-flush? straight-flush-hand)          <span class="co">;=&gt; true</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>(straight-flush? low-ace-straight-flush-hand)  <span class="co">;=&gt; true</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>(straight-flush? high-ace-straight-flush-hand) <span class="co">;=&gt; true</span></span></code></pre></div>
</section>
<p>Now that we have functions that check for each hand type, it would be
nice to be able to assign a value to each hand. We’re going to use the
following values:</p>
<table>
<thead>
<tr class="header">
<th>Hand</th>
<th>Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>High card (nothing)</td>
<td>0</td>
</tr>
<tr class="even">
<td>Pair</td>
<td>1</td>
</tr>
<tr class="odd">
<td>Two pairs</td>
<td>2</td>
</tr>
<tr class="even">
<td>Three of a kind</td>
<td>3</td>
</tr>
<tr class="odd">
<td>Straight</td>
<td>4</td>
</tr>
<tr class="even">
<td>Flush</td>
<td>5</td>
</tr>
<tr class="odd">
<td>Full house</td>
<td>6</td>
</tr>
<tr class="even">
<td>Four of a kind</td>
<td>7</td>
</tr>
<tr class="odd">
<td>Straight flush</td>
<td>8</td>
</tr>
</tbody>
</table>
<section class="alert alert-success">
<h3>
Exercise 11
</h3>
<p>Write the function <code>(value hand)</code>, which returns the value
of a hand according to the table above.</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>(value high-seven)           <span class="co">;=&gt; 0</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>(value pair-hand)            <span class="co">;=&gt; 1</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>(value two-pairs-hand)       <span class="co">;=&gt; 2</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>(value three-of-a-kind-hand) <span class="co">;=&gt; 3</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>(value straight-hand)        <span class="co">;=&gt; 4</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>(value flush-hand)           <span class="co">;=&gt; 5</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>(value full-house-hand)      <span class="co">;=&gt; 6</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>(value four-of-a-kind-hand)  <span class="co">;=&gt; 7</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>(value straight-flush-hand)  <span class="co">;=&gt; 8</span></span></code></pre></div>
<p>It might be helpful to add a checker
<code>(high-card? hand)</code>:</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu"> high-card? </span>[hand]</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">true</span>) <span class="co">; All hands have a high card.</span></span></code></pre></div>
<p>You can create a sequence of <code>[matcher value]</code> pairs like
so:</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">let</span> [checkers #{[high-card? <span class="dv">0</span>]  [pair? <span class="dv">1</span>]</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>                 [two-pairs? <span class="dv">2</span>]  [three-of-a-kind? <span class="dv">3</span>]</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>                 [straight? <span class="dv">4</span>]   [flush? <span class="dv">5</span>]</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>                 [full-house? <span class="dv">6</span>] [four-of-a-kind? <span class="dv">7</span>]</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>                 [straight-flush? <span class="dv">8</span>]}]</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>  ...)</span></code></pre></div>
<p>You can now use <code>filter</code>, <code>map</code> and
<code>apply max</code> to get the highest value that a hand has. The
function <code>second</code> can be useful. Remember to use
<code>let</code> to give the intermediate results readable names.</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode clj"><code class="sourceCode clojure"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">second</span> [<span class="at">:i</span> <span class="at">:am</span> <span class="at">:a</span> <span class="at">:sequence</span>]) <span class="co">;=&gt; :am</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>(<span class="kw">second</span> [two-pairs? <span class="dv">2</span>])        <span class="co">;=&gt; 2</span></span></code></pre></div>
</section>
</section>
<section id="data-representation-1" class="level2">
<h2>Data representation</h2>
<p>Our representation for poker hands is rather simple, but it allows us
to use existing sequence and other functions to work with them. However,
the current API is bound to the representation. This has the unfortunate
consequence that we can not change the internal representation of cards
or hands without changing the external API. There can be good reasons to
change the internal representation, including efficiency.</p>
<p>No worries, this is fixable. Let’s create two functions for creating
a card and creating a hand from the representation we already use:</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu"> hand </span>[a-hand]</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  a-hand)</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu"> card </span>[a-card]</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  a-card)</span></code></pre></div>
<p>Which you would use like this:</p>
<div class="sourceCode" id="cb34"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>(card <span class="st">&quot;2H&quot;</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>(hand [<span class="st">&quot;AH&quot;</span> <span class="st">&quot;AC&quot;</span> <span class="st">&quot;AD&quot;</span> <span class="st">&quot;AS&quot;</span> <span class="st">&quot;4H&quot;</span>])</span></code></pre></div>
<p>While these functions in their current form don’t do anything, it
allows us to change the internal representation if we want to. You would
use the existing functions like this:</p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>(rank (card <span class="st">&quot;2H&quot;</span>)) <span class="co">;=&gt; 2</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>(value (hand [<span class="st">&quot;2H&quot;</span> <span class="st">&quot;3H&quot;</span> <span class="st">&quot;4H&quot;</span> <span class="st">&quot;5H&quot;</span> <span class="st">&quot;6H&quot;</span>])) <span class="co">;=&gt; 4</span></span></code></pre></div>
<p>Now the functions <code>card</code>, <code>hand</code>,
<code>rank</code> and <code>suit</code> form the abstraction for a
playing card. They are the only functions that need to know about the
internal representatin of the card. This means that we would now be able
to change the internal representation to something like this, if we
wanted to:</p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>(card <span class="st">&quot;2H&quot;</span>) <span class="co">;=&gt; {:rank 2, :suit :hearts}</span></span></code></pre></div>
</section>
<section id="whats-next" class="level2">
<h2>What’s Next</h2>
<p>Now that you have mastered evaluating poker hands, it’s time to
understand recursion.</p>
<p><a href="predicates.html">Predicates →</a></p>
</section>
<footer>
    <p>
        &copy; iloveponies

        <span style="float: right">
            <a href="mailto:juhana.laurinharju@cs.helsinki.fi">questions?</a>
        </span>
    </p>
</footer>
</div>
</div>
</body>
</html>
