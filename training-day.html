<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Training day</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="css/base.css" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src="js/exercise-list.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <script
  src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js"
  type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <ul class="nav navbar-nav">
      <li>
        <a href="index.html">← index</a>
      </li>
      <li>
        <button type="button"
                class="btn btn-default navbar-btn"
                data-toggle="collapse" data-target="#exercise-list">
          Exercises
        </button>
      </li>
      <li>
        <ul id="exercise-list" class="collapse navbar-text list-inline">
        </ul>
      </li>
  </div>
</nav>
<div class="container">
  <div class="main-content">
<header id="title-block-header">
<h1 class="title">Training day</h1>
</header>
<section id="fork-this" class="level2">
<h2>Fork this</h2>
<p><a
href="https://github.com/iloveponies/training-day">https://github.com/iloveponies/training-day</a></p>
<p>If you followed through the instructions in the last section of the
previous chapter, you already have this repository forked, cloned and
ready to go. If you missed the instructions, <a
href="basic-tools.html#how-to-submit-answers-to-exercises">here</a> is a
link.</p>
</section>
<section id="we-come-gifting-bears" class="level2">
<h2>We come gifting bears</h2>
<blockquote>
<p>When in doubt, do exactly the opposite of CVS. <small>Linus
Torvalds</small></p>
</blockquote>
<p>You should now have a directory called <code>training-day</code>.
This directory contains a Leiningen project we have lovingly
hand-crafted just for you. It has unit tests for the exercises, more
about these in a minute. Lets first focus on the stuff inside
<code>src</code>.</p>
<p>If you are using Light Table and you followed the instructions from
the last chapter, you should have an Instarepl open for the
<code>training-day</code> project. If you don’t, now is a good time to
go through those instructions.</p>
<p>If you are using some other editor, just open the file
<code>src/training_day.clj</code>.</p>
<p>Inside the file <code>src/training-day.clj</code> are stubs for all
the exercises that require coding. For example this stub:</p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu"> square </span>[n]</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;:(&quot;</span>)</span></code></pre></div>
<p>When you are solving the exercises, you are to modify these stubs and
run the tests to see if you got it right.</p>
</section>
<section id="testing-testing-1-2-3" class="level2">
<h2>Testing, testing, 1 2 3</h2>
<p>Speaking of testing, let’s run the unit tests now. This will output a
<em>lot</em> of somewhat superfluous information while Leiningen
downloads the project dependencies, so you will see more output printed
than what is shown below. This output is printed only once, so
subsequent runs will not be so chatty.</p>
<pre><code>me@my-computer:~$ cd training-day/
me@my-computer:~/training-day$ lein midje</code></pre>
<p>Leiningen tells us it’s downloading the whole internet:</p>
<pre><code>Could not find metadata lein-midje:lein-midje:2.0.0-SNAPSHOT/maven-metadata.xml in central (http://repo1.maven.org/maven2)
Retrieving lein-midje/lein-midje/2.0.0-SNAPSHOT/maven-metadata.xml (1k)
    from http://clojars.org/repo/
…Skip…</code></pre>
<p>And finally, the output we are interested in:</p>
<pre><code>FAIL &quot;answer&quot; at (training_day_test.clj:6)
    Expected: 42
      Actual: &quot;:(&quot;

FAIL &quot;square&quot; at (training_day_test.clj:9)
    Expected: 4
      Actual: &quot;:(&quot;

FAIL &quot;square&quot; at (training_day_test.clj:10)
    Expected: 9
      Actual: &quot;:(&quot;

FAIL &quot;average&quot; at (training_day_test.clj:13)
    Expected: 3
      Actual: &quot;:(&quot;

FAIL &quot;average&quot; at (training_day_test.clj:14)
    Expected: 3/2
      Actual: &quot;:(&quot;
FAILURE: 5 facts were not confirmed.</code></pre>
<p>This tells us that all the test failed. Which was expected, as you
haven’t done any of the exercises yet.</p>
<p>Our project uses the <a
href="https://github.com/marick/Midje">Midje</a> testing library. To
ease distributing changes to the tests, the actual test code is in a
separate project. The easiest way to look at the code is to use Github.
For every chapter there is a repository with the same name and a
“-tests” suffix. This repository is where the tests live. Here’s a link
to the <a
href="https://github.com/iloveponies/training-day-tests/blob/master/src/iloveponies/tests/training_day.clj">file</a>
containing the tests for this chapter. Just click it. In the file are
blocks of code that look like this:</p>
<div class="sourceCode" id="cb5"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>(facts <span class="st">&quot;square&quot;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  (square <span class="dv">2</span>) =&gt; <span class="dv">4</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  (square <span class="dv">3</span>) =&gt; <span class="dv">9</span>)</span></code></pre></div>
<p>The <code>facts</code> form declares some facts of the
<code>square</code> function. A fact, in Midje, is an expression
<code>expr =&gt; expected-value</code>, saying “Evaluating
<code>expr</code> should return <code>expected-value</code>”. Our two
tests (or facts) say that <code>(square 2)</code> should return
<code>4</code> and <code>(square 3)</code> should return 9.</p>
<p>Our stub for <code>square</code> simply returns the string
<code>":("</code> for all values of <code>n</code>. This does not pass
the tests, which we saw above. The relevant output was:</p>
<pre><code>FAIL &quot;square&quot; at (training_day_test.clj:9)
    Expected: 4
      Actual: &quot;:(&quot;

FAIL &quot;square&quot; at (training_day_test.clj:10)
    Expected: 9
      Actual: &quot;:(&quot;</code></pre>
<p>The <code>FAIL</code> lines indicate that our stub function fails the
tests as expected, because the string <code>":("</code> is not
<code>4</code> or <code>9</code>.</p>
<p>Run <code>lein midje</code> often to see if your code is working or
not. You can also run <code>lein midje :autotest</code> to start a loop
that runs the tests every time you make changes to the code.</p>
</section>
<section id="interactive-clojure" class="level2">
<h2>Interactive Clojure</h2>
<p>One of the nice features of Clojure is the REPL. It is an interactive
session in which you can write code and see it executed immediately.
Here you have two choices. Light Table has a really nice REPL called
Instarepl, and Leiningen provides the classical REPL. We encourage you
to test out Instarepl even once. It’s pretty awsome.</p>
<section id="light-table" class="level3">
<h3>Light Table</h3>
<p>Follow the installation instructions found in the previous chapter if
you haven’t already. In Linux, you run the file <code>LightTable</code>
as you would run any binary. The previous chapter has instructions for
opening an instarepl.</p>
</section>
<section id="good-ol-repl" class="level3">
<h3>Good ol’ repl</h3>
<p>If you don’t want to use Light Table, there is always the
<code>lein repl</code>. Issue that command in the terminal and an
interactive Clojure session starts. It should look like this:</p>
<pre><code>me@my-computer:~$ lein repl
nREPL server started on port 50443
Welcome to REPL-y!
Clojure 1.5.0
    Exit: Control+D or (exit) or (quit)
Commands: (user/help)
    Docs: (doc function-name-here)
          (find-doc &quot;part-of-name-here&quot;)
  Source: (source function-name-here)
          (user/sourcery function-name-here)
 Javadoc: (javadoc java-object-or-class-here)
Examples from clojuredocs.org: [clojuredocs or cdoc]
          (user/clojuredocs name-here)
          (user/clojuredocs &quot;ns-here&quot; &quot;name-here&quot;)
user=&gt;</code></pre>
<p>If you type <code>(+ 1 2)</code> and press the return key, you should
see this:</p>
<div class="sourceCode" id="cb8"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>user=&gt; (<span class="kw">+</span> <span class="dv">1</span> <span class="dv">2</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>user=&gt;</span></code></pre></div>
<p>Clojure evaluated the expression <code>(+ 1 2)</code> and printed its
value, <code>3</code>. If you see something different, please let us
know by raising your hand.</p>
</section>
</section>
<section id="notation" class="level2">
<h2>Notation</h2>
<p>In our example code, we often want to show the result of an
expression when it is evaluated. Instead of showing what evaluating the
expression in the interactive session looks like:</p>
<div class="sourceCode" id="cb9"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>user=&gt; (<span class="kw">+</span> <span class="dv">3</span> <span class="dv">4</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span></span></code></pre></div>
<p>We’re going to use the convention of writing the expression and the
result, separated with <code>;=&gt;</code>. Quite like how Light Table
does it. For an example:</p>
<div class="sourceCode" id="cb10"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">+</span> <span class="dv">3</span> <span class="dv">4</span>) <span class="co">;=&gt; 7</span></span></code></pre></div>
<p>Sometimes we will put the result on a new line:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">str</span> <span class="dv">1337</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">;=&gt; &quot;1337&quot;</span></span></code></pre></div>
<section class="alert alert-info">
<h3>
Hint
</h3>
<p><code>str</code> is a function that turns its argument to a string.
If given multiple arguments, it concatenates the results:</p>
<div class="sourceCode" id="cb12"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">str</span> <span class="st">&quot;Over &quot;</span> <span class="dv">9000</span> <span class="st">&quot;!&quot;</span>) <span class="co">;=&gt; &quot;Over 9000!&quot;</span></span></code></pre></div>
</section>
<p>When the resulting value is too long to display on one line, we will
mark the continuation lines with a leading <code>;</code> like this:</p>
<div class="sourceCode" id="cb13"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">take</span> <span class="dv">20</span> (<span class="kw">cycle</span> [<span class="st">&quot;foo&quot;</span> <span class="st">&quot;bar&quot;</span>]))</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co">;=&gt; (&quot;foo&quot; &quot;bar&quot; &quot;foo&quot; &quot;bar&quot; &quot;foo&quot; &quot;bar&quot; &quot;foo&quot; &quot;bar&quot; &quot;foo&quot; &quot;bar&quot;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co">;    &quot;foo&quot; &quot;bar&quot; &quot;foo&quot; &quot;bar&quot; &quot;foo&quot; &quot;bar&quot; &quot;foo&quot; &quot;bar&quot; &quot;foo&quot; &quot;bar&quot;)</span></span></code></pre></div>
<p><code>;</code> starts a comment that lasts until the end of that
line, like <code>//</code> in Java. The <code>=&gt;</code> inside the
comment is an illustration of an arrow, meaning “evaluates to”. You can
copy the examples above to the REPL and they will work without
modification:</p>
<div class="sourceCode" id="cb14"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>user=&gt; (<span class="kw">+</span> <span class="dv">3</span> <span class="dv">4</span>)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>user=&gt; (<span class="kw">+</span> <span class="dv">3</span> <span class="dv">4</span>) <span class="co">;=&gt; 7</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>user=&gt; (<span class="kw">+</span> <span class="dv">3</span> <span class="dv">4</span>) <span class="co">; I am a comment</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span></span></code></pre></div>
</section>
<section id="prefix-syntax" class="level2">
<h2>Prefix Syntax</h2>
<p>As you can see above, instead of writing <code>1 + 2</code> to
calculate the sum of one and two, we write <code>(+ 1 2)</code>. This
syntax applies everywhere in Clojure. In fact, Clojure has no operators
at all. In languages such as Java or C, arithmetic operations are
usually written in the mathematical notation called <em>infix form</em>.
Clojure, on the other hand, uses <em>prefix form</em> for its syntax.
The next table shows what mathematical expressions look like in these
two syntaxes.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Java</th>
<th>Clojure</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>2 + 3</code></td>
<td><code>(+ 2 3)</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>42 * 7</code></td>
<td><code>(* 42 7)</code></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>2 - 78 * 35</code></td>
<td><code>(- 2 (* 78 35))</code></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>1 + 2 + 3 + 4</code></td>
<td><code>(+ 1 2 3 4)</code></td>
</tr>
</tbody>
</table>
<p>Let’s input these definitions in our Clojure session to see how they
work:</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>user=&gt; (<span class="kw">+</span> <span class="dv">2</span> <span class="dv">3</span>)</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>user=&gt; (<span class="kw">*</span> <span class="dv">42</span> <span class="dv">7</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="dv">294</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>user=&gt; (<span class="kw">-</span> <span class="dv">2</span> (<span class="kw">*</span> <span class="dv">78</span> <span class="dv">35</span>))</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>-<span class="dv">2728</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>user=&gt; (<span class="kw">+</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span>)</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span></span></code></pre></div>
<section class="alert alert-success">
<h3>
Exercise 1
</h3>
Write the following expression in the Clojure prefix syntax: <span
class="math inline">\((2 * 3) + 4\)</span>. Try evaluating it in the
REPL. The result should be 10. This exercise does not give any points
and you do not need to return it.
</section>
<section class="alert alert-success">
<h3>
Exercise 2
</h3>
Write the expression <span class="math inline">\(3 + 4 + 5 + 6\)</span>
in Clojure syntax. Evaluate it in the REPL. This exercise does not give
any points and you do not need to return it.
</section>
<p>The arithmetic operations have some special properties. Everyone of
the operations works with only one operand.</p>
<div class="sourceCode" id="cb16"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">+</span> <span class="dv">1</span>) <span class="co">;=&gt; 1</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>(<span class="kw">*</span> <span class="dv">2</span>) <span class="co">;=&gt; 2</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>(<span class="kw">-</span> <span class="dv">3</span>) <span class="co">;=&gt; -3</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>(<span class="kw">/</span> <span class="dv">4</span>) <span class="co">;=&gt; 1/4</span></span></code></pre></div>
<p>This behavior might seem odd, but here is the catch. The arithmetic
operations above are, in fact, function calls. That is, <code>+</code>
is actually a function (called <code>+</code>), as are <code>*</code>
and <code>-</code>. Don’t believe use? Write just <code>+</code> in the
REPL. In Instarepl you see</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="kw">+</span> =&gt; <span class="kw">fn</span></span></code></pre></div>
<p>and in <code>lein repl</code></p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>user=&gt; <span class="kw">+</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>#&lt;core$_PLUS_ clojure.core$_PLUS_<span class="at">@2d21471c&gt;</span></span></code></pre></div>
<p>They are both telling you that <code>+</code> is just a function.</p>
<p>All function calls in Clojure look the same:
<code>(function-name argument-1 argument-2 ...)</code>. As an example of
a non-arithmetic function, let’s take a look at getting a single
character from a string in Clojure and Java. In Clojure, we can use the
<code>get</code> function for this:</p>
<div class="sourceCode" id="cb19"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">get</span> <span class="st">&quot;Clojure&quot;</span> <span class="dv">2</span>) <span class="co">;=&gt; \o</span></span></code></pre></div>
<p>The result is the character <code>o</code>, printed in Clojure’s
literal character syntax. (That is, <code>\o</code> in Clojure code
means the single character <code>o</code>. In Java, you would write a
literal character as <code>'o'</code>.)</p>
<p>In Java, we reorder things a bit: the first parameter goes
<em>before</em> the method name, and the parentheses are moved
<em>after</em> the method name:</p>
<div class="sourceCode" id="cb20"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="st">&quot;Java&quot;</span><span class="op">.</span><span class="fu">charAt</span><span class="op">(</span><span class="dv">2</span><span class="op">);</span> <span class="co">//=&gt; &#39;v&#39;</span></span></code></pre></div>
<p>In Clojure, the function name always goes first, and the parameters
come after it, including the object, if such is present. The Clojure
syntax might take some time to get used to, but becomes natural after
you’ve written a few Clojure programs.</p>
<section class="alert alert-success">
<h3>
Exercise 3
</h3>
Write a Clojure expression in the REPL that, using <code>get</code>,
gets the first character in the string <code>"abrakadabra"</code>. This
exercise does not give any points and you do not need to return it.
</section>
</section>
<section id="functions" class="level2">
<h2>Functions</h2>
<p>So far we’ve worked with expressions and called some existing
functions. For structuring any kind of non-trivial programs, we will
want to group code into our own <em>functions</em>.</p>
<p>Lets start writing a function <code>(hello who)</code>, which returns
an English greeting for the user. Functions are created with
<code>fn</code>. Write the following in you REPL and evaluate it.</p>
<div class="sourceCode" id="cb21"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">fn</span> [who] (<span class="kw">str</span> <span class="st">&quot;Hello, &quot;</span> who <span class="st">&quot;!&quot;</span>))</span></code></pre></div>
<p>The REPL should tell you that it was a function. Instarepl just
says</p>
<div class="sourceCode" id="cb22"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">fn</span> [who] (<span class="kw">str</span> <span class="st">&quot;Hello, &quot;</span> who <span class="st">&quot;!&quot;</span>)) <span class="kw">fn</span></span></code></pre></div>
<p>As usual, <code>lein repl</code> is a bit more verbose and states</p>
<div class="sourceCode" id="cb23"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>user=&gt; (<span class="kw">fn</span> [who] (<span class="kw">str</span> <span class="st">&quot;Hello, &quot;</span> who <span class="st">&quot;!&quot;</span>))</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>#&lt;user$eval326$fn__327 user$eval326$fn__327<span class="at">@4a2d09aa&gt;</span></span></code></pre></div>
<p>So what kind of a function did we actually get? Inside the square
brackets are the parameters of the function. This one only has a one and
we gave that a name <code>who</code>. Right after that comes comes an
expression, a call to a function <code>str</code> in this case. The
value of this expression will become the return value of this function.
In general, the return value of a function will be the value of the last
expression in the function.</p>
<p>So we got a function. Lets call it!</p>
<div class="sourceCode" id="cb24"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>((<span class="kw">fn</span> [who] (<span class="kw">str</span> <span class="st">&quot;Hello, &quot;</span> who <span class="st">&quot;!&quot;</span>)) <span class="st">&quot;Jani&quot;</span>) <span class="co">;=&gt; &quot;Hello, Jani!&quot;</span></span></code></pre></div>
<p>That worked just like with <code>+</code> and the others. First comes
the function, then the arguments. In this case the function does not
have a name so we need to write the whole definiton. We also have only
one argument, <code>"Jani"</code>.</p>
<section class="alert alert-success">
<h3>
Exercise 4
</h3>
<p>Call the following function in the REPL with your name.</p>
<div class="sourceCode" id="cb25"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">fn</span> [<span class="kw">name</span>] (<span class="kw">str</span> <span class="st">&quot;Welcome to Rivendell mr &quot;</span> <span class="kw">name</span>))</span></code></pre></div>
This exercise does not give any points and you do not need to return it.
</section>
<p>Now we know how to make a function, but we only got a glimpse of it
and then it was gone. We have to write the definition of the function
every time we want to call it. But we want something more permanent,
something that we can write once and call multiple times! The functions
created with <code>fn</code> are called <em>anonymous functions</em>.
They are called that because they have no name. To give a name to a
function we can use <code>def</code>. Let’s give the greeter function a
name right away.</p>
<div class="sourceCode" id="cb26"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">def</span><span class="fu"> hello </span>(<span class="kw">fn</span> [who] (<span class="kw">str</span> <span class="st">&quot;Hello, &quot;</span> who <span class="st">&quot;!&quot;</span>)))</span></code></pre></div>
<p>That definition is also an expression, so don’t forget to evaluate
it. Now we can call this function. Write
<code>(hello "beautiful")</code> in your REPL to get a instant
compliment. In the name of sex-equality evaluate also
<code>(hello "handsome")</code>.</p>
<p>So what just happened? Well, <code>def</code> gives a name to a
value. In the previous case the value is what we get when we evaluate
<code>(fn [who] (str "Hello, " who "!"))</code>. And what do we get when
we evaluate that? A function. So we gave the name <code>hello</code> to
a function that gives out greetings.</p>
<section class="alert alert-success">
<h3>
Exercise 5
</h3>
<p>Give a name <code>answer</code> to the answer to life the universe
and everything. This is the first exercise in which you need to modify
the file <code>src/training_day.clj</code>. Remember to run the tests
with <code>lein midje</code>.</p>
<div class="sourceCode" id="cb27"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>aswer <span class="co">;=&gt; 42</span></span></code></pre></div>
</section>
<p>Anonymous functions have their uses in functional programming. So it
is nice to know that we can create them with <code>fn</code>. But most
of the time we want to give the function a name right away. To make that
a bit easier, we have <code>defn</code>. Here is how to create
<em>and</em> name the previous function with <code>defn</code>. There is
a running commentary alongside, to make sure we understand its
parts.</p>
<div class="sourceCode" id="cb28"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>(<span class="bu">defn</span><span class="fu">                                 </span><span class="co">; Start a function definition:</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  hello                               <span class="co">; name</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Gives out personalized greetings.&quot;</span> <span class="co">; a optional docstring</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  [who]                               <span class="co">; parameters inside brackets</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  (<span class="kw">str</span> <span class="st">&quot;Hello, &quot;</span> who <span class="st">&quot;!&quot;</span>))            <span class="co">; body</span></span></code></pre></div>
<p>Here <code>hello</code> is the name of the function,
<code>[who]</code> is the parameter list, and the expression on the
second line is the body of the function. The return value of the
function is the value of the last expression inside the function body.
In this case, it is the value of the
<code>(str "Hello, " who "!")</code> expression. We have also provided
an docstring that briefly tells what this function does. This is
optional, but like washing your hands after visiting the toilet, highly
recommended.</p>
<p>For comparison, our function looks like this in Java:</p>
<div class="sourceCode" id="cb29"><pre
class="sourceCode java"><code class="sourceCode java"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co">/**</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a> <span class="co">*</span> Gives out personalized greetings<span class="co">.</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a> <span class="co">*/</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="bu">String</span> <span class="fu">hello</span><span class="op">(</span><span class="bu">String</span> who<span class="op">)</span> <span class="op">{</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">&quot;Hello, &quot;</span> <span class="op">+</span> who <span class="op">+</span> <span class="st">&quot;!&quot;</span><span class="op">;</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Note that in Clojure, there is no <code>return</code> keyword. The
return value of a function is always the value of the last expression in
the function body.</p>
<section class="alert alert-info">
<h3>
Hint
</h3>
<p>Want to take a look at the docstring of some function? You can use
the <code>doc</code> function to do so. Unfortunately you need to do
some tricks to get your hands at this function. But don’t worry, it’s
not difficult.</p>
<div class="sourceCode" id="cb30"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>user=&gt; (<span class="kw">use</span> <span class="at">&#39;clojure.repl</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>user=&gt; (<span class="kw">doc</span> <span class="kw">+</span>)</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>-------------------------</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>clojure.core/+</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>([] [x] [x y] [x y &amp; more])</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  Returns the sum of nums. (<span class="kw">+</span>) returns <span class="fl">0.</span> Does <span class="kw">not</span> auto-promote</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">longs</span>, will <span class="kw">throw</span> on overflow. See also: <span class="kw">+&#39;</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code></pre></div>
<p>You can also see the docstring of our <code>hello</code> function.
Evaluate the following in your REPL.</p>
<div class="sourceCode" id="cb31"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">use</span> <span class="at">&#39;clojure.repl</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>(<span class="kw">doc</span> hello)</span></code></pre></div>
<p>You can also use <code>(user/clojuredocs function)</code> to see some
examples for <code>function</code>. This should work for most of the
built-in functions.</p>
<div class="sourceCode" id="cb32"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>user=&gt; (user/clojuredocs <span class="kw">min</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>========== vvv Examples ================</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  user=&gt; (<span class="kw">min</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span>)  </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  user=&gt; (<span class="kw">min</span> <span class="dv">5</span> <span class="dv">4</span> <span class="dv">3</span> <span class="dv">2</span> <span class="dv">1</span>)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  user=&gt; (<span class="kw">min</span> <span class="dv">100</span>)</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  <span class="dv">100</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>========== ^^^ Examples ================</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> example found <span class="kw">for</span> clojure.core/min</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a><span class="va">nil</span></span></code></pre></div>
<p>The next section will tell you more about the function
<code>use</code>.</p>
</section>
</section>
<section id="files-and-namespaces" class="level2">
<h2>Files and Namespaces</h2>
<p>Code in Clojure projects is structured into namespaces defined in
files. Usually each file corresponds to a one namespace identified by
the file’s path. For an example, the file <code>foo/bar/baz.clj</code>
could contain the namespace <code>foo.bar.baz</code>. This is slightly
different from Java, where directories correspond to namespaces
(packages) and files under a directory usually contain a single class in
the given package.</p>
<p>The repository that you cloned at the end of the last chapter
contains an Leiningen project. Inside the <code>src</code> directory are
all the code files of the project. The file
<code>training_day.clj</code> should begin with the following.</p>
<div class="sourceCode" id="cb33"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">ns</span> training-day)</span></code></pre></div>
<p>This is a namespace definition. It tells us that the code in this
file is in the namespace <code>training-day</code>. There are no dots in
the namespace name as there is no directories under <code>src</code>,
just the lonely file <code>training_day.clj</code>.</p>
<section class="alert alert-warning">
<h3>
Watch out!
</h3>
<p>See how the namespace is called <code>training-day</code>, but the
file is <code>training_day.clj</code>? This is intentional. If a
namespace name has an hyphen, the corresponding file name should have an
underscore.</p>
</section>
<p>We are at cross roads. Choose to right set of instructions based on
your REPL.</p>
<section class="alert alert-info">
<h3>
Hint
</h3>
<section id="light-table-1" class="level4">
<h4>Light Table</h4>
<p>You need to first connect to the project <code>training-day</code>.
When you then open an instarepl, LigthTable should ask you to which
project you want to connect. Select <code>training-day</code>.
Instructions for all this are in the <a
href="basic-tools.html#editor">previous chapter</a>.</p>
</section>
<section id="lein-repl" class="level4">
<h4>lein repl</h4>
<p>Navigate to the directory <code>training-day</code>, and run
<code>lein repl</code>.</p>
</section>
<!-- BUG in pandoc. This is required to forcefully close
                the info section -->
</section>
<p>Now as you have your REPLs open, write the following in it.</p>
<div class="sourceCode" id="cb34"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>(<span class="kw">use</span> <span class="at">&#39;training-day</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>hai</span></code></pre></div>
<p>Were you greeted in all CAPS? If not, please raise your hand.</p>
<p>What <code>use</code> did was that it looked inside the namespace
<code>training-day</code> and brought with it all the names defined in
that namespace. The name <code>hai</code> was one of them.</p>
<section class="alert alert-warning">
<h3>
Watch out!
</h3>
<p>The <code>'</code> before the namespace name in a <code>use</code> is
important. If you forget it, you will get an error like this:</p>
<div class="sourceCode" id="cb35"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>user=&gt; (<span class="kw">use</span> example.hello)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>java.lang.ClassNotFoundException: example.hello (NO_SOURCE_FILE<span class="at">:1</span>)</span></code></pre></div>
<code>'</code> is an alias for the <code>quote</code> special form,
which we will talk more about later.
</section>
</section>
</section>
<section id="time-to-submit" class="level2">
<h2>Time to submit</h2>
<p>Here are two exercises more to keep your fingers warm.</p>
<section class="alert alert-success">
<h3>
Exercise 6
</h3>
<p>Write the function <code>(square x)</code> that takes a number as a
parameter and multiplies it with itself.</p>
<div class="sourceCode" id="cb36"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>(square <span class="dv">2</span>) <span class="co">;=&gt; 4</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>(square <span class="dv">3</span>) <span class="co">;=&gt; 9</span></span></code></pre></div>
</section>
<section class="alert alert-success">
<h3>
Exercise 7
</h3>
<p>Write the function <code>(average a b)</code>, which returns the
average of its two parameters:</p>
<div class="sourceCode" id="cb37"><pre
class="sourceCode clojure"><code class="sourceCode clojure"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>(average <span class="dv">2</span> <span class="dv">4</span>) <span class="co">;=&gt; 3</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>(average <span class="dv">1</span> <span class="dv">2</span>) <span class="co">;=&gt; 3/2</span></span></code></pre></div>
</section>
<p>Now would be the time to submit your solutions to be graded. Run
<code>lein midje</code> to see if all the tests pass. If the do, you
should see the following:</p>
<div class="sourceCode" id="cb38"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="ex">me@my-computer:~/training-day$</span> lein midje</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="ex">All</span> claimed facts <span class="er">(</span><span class="ex">5</span><span class="kw">)</span> <span class="ex">have</span> been confirmed.</span></code></pre></div>
<p>Don’t worry if you haven’t figured out all the exercises. You can
still submit those that you have successfully made. Here is how to do
it.</p>
<ol type="1">
<li><p>Create a commit of your changes by running</p>
<div class="sourceCode" id="cb39"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> commit <span class="at">-a</span> <span class="at">-m</span> <span class="st">&quot;message here&quot;</span></span></code></pre></div></li>
<li><p>Update your fork in Github by pushing the changes. This will ask
for your Github login.</p>
<div class="sourceCode" id="cb40"><pre
class="sourceCode sh"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">git</span> push</span></code></pre></div></li>
<li><p>Go to the Github page of <strong>your fork</strong> of the
repository <code>training-day</code>. Click on the green
<code>Compare &amp; review</code> button. When you are ready, click
<code>Send pull request</code>.</p></li>
</ol>
<p>If you didn’t submit the solutions all at once, or some of the
submited ones were incorrect, you can re-submit as many times as you
need to. Just fix the code and follow the steps 1 and 2 again. When you
push, the open pull request is updated.</p>
<p><a href="I-am-a-horse-in-the-land-of-booleans.html">Proceed to the
horse feast! →</a></p>
</section>
<footer>
    <p>
        &copy; iloveponies

        <span style="float: right">
            <a href="mailto:juhana.laurinharju@cs.helsinki.fi">questions?</a>
        </span>
    </p>
</footer>
</div>
</div>
</body>
</html>
